---
layout: layouts/map.njk
description: Map of my spots
permalink: /map/
title: Map of my spots
eleventyNavigation:
  key: Map of my spots
  order: 3
---

<style>
  /* The map only has light mode. */
  html {
    --color-1: #639;
    --color-background: #fff;
    --color-copy: #444;
    --color-link: var(--color-1);
    --color-post-title: var(--color-1);
    --color-post-title-hover: var(--color-1);
    --color-post-image-hover: var(--color-1);
    --font-size: 16;
    --footer-background: linear-gradient(#fff 15%, #eee);
    --rem: 1 / var(--font-size) * 1rem;
    font-size: 16px;
    scroll-behavior: smooth;
  }
</style>

<div class="map-wrapper" id="map"></div>
<div class="map-legend minimize" id="map-legend">
  <h4 class="map-legend-heading js-legend-toggle">Legend</h4>
  <ul id="map-legend-items">
    <li>
      <div class="map-legend-symbol"><img src="/assets/images/map-icons/marker-icon-campspot.svg" alt=""></div>
      <div class="map-legend-label">Spots</div>
    </li>
  </ul>
</div>


<script>
  // https://stackoverflow.com/a/34579496/2716287
  document.addEventListener("DOMContentLoaded", function(){
    let date = new Date().getTime()
    let file = "/assets/js/map/spots-free.json"

    const startMap = () => {
      loadJSON(file, function(text){
        data = JSON.parse(text);
        initMap(data)
      });
    }

    // Use the Promise-based loader instead of setInterval
    loadClusterAssets()
      .then(startMap)
      .catch(err => {
        console.error("Failed to load clustering assets:", err);
        startMap(); // Start anyway without clusters
      });
  });
  // END https://stackoverflow.com/a/34579496/2716287
</script>
