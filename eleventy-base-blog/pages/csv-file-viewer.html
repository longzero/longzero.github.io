---
layout: layouts/blank.njk
# description: Time
permalink: /csv/
title: CSV file viewer
# eleventyNavigation:
#   key: Time
#   order: 3
---

<style>
    body {
        font-family: Arial, sans-serif;
        margin: 20px;
    }
    #dropArea {
        width: 100%;
        padding: 50px;
        border: 2px dashed #ccc;
        text-align: center;
        color: #aaa;
        margin-bottom: 20px;
    }
    table {
        width: 100%;
        border-collapse: collapse;
    }
    table, th, td {
        border: 1px solid black;
    }
    th, td {
        padding: 10px;
        text-align: left;
    }
</style>

<h1>CSV File Viewer</h1>
<div id="dropArea">Drag and drop your time-tracking.csv file here or press <strong>Ctrl + O</strong> to open a file</div>
<input type="file" id="fileInput" accept=".csv">
<div id="output"></div>

<script>
    const dropArea = document.getElementById('dropArea');
    const fileInput = document.getElementById('fileInput');

    // Prevent default drag behaviors
    ['dragenter', 'dragover', 'dragleave', 'drop'].forEach(eventName => {
        dropArea.addEventListener(eventName, preventDefaults, false);
    });

    function preventDefaults(e) {
        e.preventDefault();
        e.stopPropagation();
    }

    // Highlight the drop area when the file is over it
    ['dragenter', 'dragover'].forEach(eventName => {
        dropArea.addEventListener(eventName, () => dropArea.style.borderColor = 'green', false);
    });

    ['dragleave', 'drop'].forEach(eventName => {
        dropArea.addEventListener(eventName, () => dropArea.style.borderColor = '#ccc', false);
    });

    // Handle file drop
    dropArea.addEventListener('drop', function(e) {
        const files = e.dataTransfer.files;
        if (files.length > 0 && files[0].type === 'text/csv') {
            const file = files[0];
            readFile(file);
        }
    });

    // File input change
    fileInput.addEventListener('change', function() {
        const file = fileInput.files[0];
        if (file && file.type === 'text/csv') {
            readFile(file);
        }
    });

    // Keyboard shortcut (Ctrl + O or Cmd + O)
    document.addEventListener('keydown', function(e) {
        if ((e.ctrlKey || e.metaKey) && e.key === 'o') {
            e.preventDefault();
            fileInput.click();  // Trigger the file input click
        }
    });

    // Read the file content
    function readFile(file) {
        const reader = new FileReader();
        reader.onload = function(e) {
            const content = e.target.result;
            displayCSV(content);
        };
        reader.readAsText(file);
    }

    // Display the CSV in a table
    function displayCSV(content) {
        const rows = content.split('\n');
        let table = '<table>';
        rows.forEach((row, index) => {
            const cols = row.split(',');
            table += '<tr>';
            cols.forEach(col => {
                if (index === 0) {
                    table += `<th>${col.trim()}</th>`;
                } else {
                    table += `<td>${col.trim()}</td>`;
                }
            });
            table += '</tr>';
        });
        table += '</table>';
        document.getElementById('output').innerHTML = table;
    }
</script>
