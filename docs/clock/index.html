
<!doctype html>
<html lang="en">
  <head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="generator" content="Eleventy v3.0.0">

  <title>Clock</title>
  <meta name="description" content="My name is Long Nguyen. I am a Front-End Web Developer obsessed with UX. I am experienced in building simple, clean and user-friendly websites for clients across the globe. Reach me on Instagram or Twitter or by email long@longzero.com.">

  <link rel="apple-touch-icon" href="/assets/images/favicon.png">
  <link rel="icon" href="/assets/images/favicon.png">
  <link rel="preload" crossorigin="anonymous" as="font" href="/assets/fonts/oxygen-v10-latin-regular.woff2">
  <link rel="preload" crossorigin="anonymous" as="font" href="/assets/fonts/oxygen-v10-latin-700.woff2">

  <script>
    // Tracking code for longzero.com
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=true;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    ga('create', 'UA-25351410-3', 'auto');
    ga('send', 'pageview');
  </script>

  
  
  
    
  

  <meta property="og:site_name" content="Longzero ~ Long Nguyen">
  <meta property="og:description" content="">
  <meta property="og:image" content="https://longzero.com/assets/images/og-map.jpg">
  <meta property="og:title" content="Clock">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://longzero.com/clock/">

  <meta name="theme-color" content="#336699">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  <meta prefix="og: http://ogp.me/ns#" property="og:article:author" content="Longzero">

  

  
  
  
  
  
</head>


  <body class="template-blank">
    

    <main>

      
<link id="favicon" rel="icon" href="#" type="image/png">

<style>
  :root{
    --bg-overlay: rgba(0,0,0,0.35);
    --glass-overlay: rgba(255,255,255,0.06);
    --accent: rgba(255,255,255,0.9);
    --muted: rgba(255,255,255,0.85);
  }
  html,body{
    height:100%;
    margin:0;
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    color: white;
    -webkit-font-smoothing:antialiased;
    -moz-osx-font-smoothing:grayscale;
  }

  body{
    /* background will be set by JS for daily image */
    background-size: cover;
    background-position: center center;
    background-repeat: no-repeat;
    display:flex;
    align-items:center;
    justify-content:center;
    text-align:center;
    position:relative;
    transition: background-image 800ms ease-in-out;
  }

  /* dark overlay for readability */
  .overlay{
    position: absolute;
    inset:0;
    background: linear-gradient(180deg, rgba(0,0,0,0.28), rgba(0,0,0,0.48));
    pointer-events: none;
  }

  .container{
    position: relative;
    z-index: 2;
    width: min(92vw, 1100px);
    padding: 40px;
    box-sizing: border-box;
    display:flex;
    flex-direction:column;
    align-items:center;
    gap:14px;
    /* backdrop-filter: blur(6px) saturate(1.05); */
  }

  .time{
    font-size: clamp(48px, 12vw, 140px);
    font-weight: 600;
    letter-spacing: -1px;
    line-height: 0.95;
    color: var(--accent);
    text-shadow: 0 6px 24px rgba(0,0,0,0.6);
    margin:0;
  }

  .mantra{
    font-size: clamp(14px, 2.6vw, 20px);
    opacity:0.98;
    margin:0;
    font-weight:500;
    color: rgba(255,255,255,0.95);
    text-shadow: 0 3px 10px rgba(0,0,0,0.45);
  }

  .quote{
    margin:0;
    font-size: clamp(12px, 2vw, 16px);
    opacity:0.95;
    font-style: italic;
    color: rgba(255,255,255,0.92);
    max-width: 70ch;
    text-shadow: 0 3px 10px rgba(0,0,0,0.45);
  }

  .attribution{
    margin-top:8px;
    font-size:12px;
    color: rgba(255,255,255,0.8);
    opacity:0.9;
  }

  /* Clock styles */
  .time-container {
    position: relative;
    width: clamp(120px, 30vw, 300px);
    height: clamp(120px, 30vw, 300px);
  }

  .digital-time {
    position: absolute;
    inset: 0;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: opacity 0.3s;
  }

  .analog-time {
    position: absolute;
    inset: 0;
    opacity: 0;
    pointer-events: none;
    transition: opacity 0.3s;
  }

  .time-container.analog .digital-time {
    opacity: 0;
    pointer-events: none;
  }

  .time-container.analog .analog-time {
    opacity: 1;
    pointer-events: auto;
  }

  .clock-face {
    width: 100%;
    height: 100%;
    border: 3px solid rgba(255,255,255,0.8);
    border-radius: 50%;
    position: relative;
    box-shadow: 0 0 20px rgba(0,0,0,0.4);
    background: rgba(255,255,255,0.1);
    backdrop-filter: blur(4px);
  }

  .clock-center {
    position: absolute;
    top: 50%;
    left: 50%;
    width: 12px;
    height: 12px;
    border-radius: 50%;
    background: white;
    transform: translate(-50%, -50%);
    z-index: 10;
  }

  .clock-hand {
    position: absolute;
    bottom: 50%;
    left: 50%;
    transform-origin: bottom;
    background: white;
    border-radius: 4px;
  }

  .hours-hand {
    width: 4px;
    height: 25%;
    transform: translateX(-50%);
  }

  .minutes-hand {
    width: 3px;
    height: 35%;
    transform: translateX(-50%);
  }

  .seconds-hand {
    width: 2px;
    height: 40%;
    background: var(--accent);
    transform: translateX(-50%);
  }

  /* small corner controls (edit text) */
  .controls{
    display:flex;
    /*display: none; */
    /* hide by default, enable for testing */
    position: absolute;
    top: 12px;
    right: 12px;
    z-index:5;
    gap:8px;
  }
  .btn{
    background: var(--glass-overlay);
    border: 1px solid rgba(255,255,255,0.08);
    padding:6px 8px;
    border-radius:8px;
    cursor:pointer;
    color:var(--muted);
    font-size:13px;
    backdrop-filter: blur(4px);
  }

  /* responsive spacing */
  @media (max-height:520px){
    .container{ padding:18px; gap:8px; }
    .time{ font-size: clamp(36px, 10vw, 84px); }
  }
</style>

<main>
  <div class="overlay" aria-hidden="true"></div>

  <div class="container" role="main" aria-live="polite">
    <div class="time-container analog">
      <div class="digital-time">
        <h1 id="time" class="time" aria-label="Current time">--:--:--</h1>
      </div>
      <div class="analog-time">
        <div class="clock-face">
          <div class="clock-hand hours-hand"></div>
          <div class="clock-hand minutes-hand"></div>
          <div class="clock-hand seconds-hand"></div>
          <div class="clock-center"></div>
        </div>
      </div>
    </div>
    <div class="mantra" id="mantra">Breathe. Focus. Start.</div>
    <div class="quote" id="quote">"A small step today is a big step tomorrow." — unknown</div>
    <div class="attribution" id="attrib" aria-hidden="true"></div>
  </div>

  <!-- small controls: edit mantra/quote or refresh background -->
  <div class="controls" aria-hidden="false">
    <span id="failCount" class="btn" style="display: none; cursor: default; opacity: 0.1; font-size: 11px;">0 failed</span>
    <button id="clockBtn" class="btn" title="Toggle between analog and digital clock">Toggle Clock</button>
    
    <button id="refreshBtn" class="btn" title="Force new background image">Refresh BG</button>
  </div>
</main>

<script>
  (function(){
    // ---------- content configuration ----------
    const dailyContent = {
      mantras: [
        "Breathe. Focus. Start.",
        "Do one thing that moves the day forward.",
        "Keep it simple. Keep it steady.",
        "Progress over perfection.",
        "Finish what you started.",
        "Small steps, consistent action.",
        "Choose clarity over chaos.",
        "Present moment, precious moment.",
        "Every day is a fresh canvas.",
        "Flow like water, stand like mountain.",
        "Mindful steps create the path.",
        "Patience breeds possibility.",
        "Simple actions, profound impact.",
        "Aim for excellence, not perfection.",
        "Trust the journey within.",
        "Umuntu ngumuntu ngabantu (I am because we are).",
        "Ichigo Ichie (Treasure every moment).",
        "Sabai Sabai (Stay relaxed, stay calm).",
        "Kia Kaha (Stay strong, stay brave).",
        "Vasudhaiva Kutumbakam (The world is one family).",
        "Allin Kawsay (Living in harmony).",
        "Haraka haraka haina baraka (Patience is a blessing).",
        "Om Mani Padme Hum (Compassion and wisdom).",
        "Walk like a lion, talk like a whisper.",
        "Ăn quả nhớ kẻ trồng cây (Gratitude for those before us).",
        "Karmatha (Focus on the work, not the fruit).",
        "Metta (Loving-kindness to all).",
        "Flow like the Ganges, stay still like the Himalaya.",
        "All that you are is the result of what you have thought.",
        "Pura Vida (The pure life).",
        "Hakuna Matata (No worries).",
        "Jai Ho (Let victory be yours).",
        "Namaste (The divine in me honors the divine in you).",
        "Sawubona (I see you, and you are significant).",
        "Sanuk (Seek pleasure in everything you do).",
        "Wabi Sabi (Find perfection in the imperfect).",
        "Ase (The power to make what we say happen).",
        "Hozho (Walking in beauty and balance).",
        "Inshallah (Moving forward with grace).",
        "Amani (Peace within, peace without).",
        "Satori (Evolve through sudden clarity)."
      ],

      quotes: [
        {q: "The secret of getting ahead is getting started.", a: "Mark Twain"},
        {q: "Small deeds done are better than great deeds planned.", a: "Peter Marshall"},
        {q: "Start where you are. Use what you have. Do what you can.", a: "Arthur Ashe"},
        {q: "You don’t have to be great to start, but you have to start to be great.", a: "Zig Ziglar"},
        {q: "Do the hard jobs first. The easy jobs will take care of themselves.", a: "Dale Carnegie"},
        {q: "Motivation is what gets you started. Habit is what keeps you going.", a: "Jim Ryun"},
        {q: "It always seems impossible until it's done.", a: "Nelson Mandela"},
        {q: "The best time to plant a tree was 20 years ago. The second best time is now.", a: "Chinese proverb"},
        {q: "Patience is bitter, but its fruit is sweet.", a: "Persian proverb"},
        {q: "Fall seven times, stand up eight.", a: "Japanese proverb"},
        {q: "The world is not in your books and maps, it's out there.", a: "J.R.R. Tolkien"},
        {q: "No hay mal que por bien no venga. (There is no bad from which good does not come.)", a: "Latin American proverb"},
        {q: "Life is not measured by the number of breaths we take, but by the moments that take our breath away.", a: "Maya Angelou"},
        {q: "The wound is the place where the Light enters you.", a: "Rumi"},
        {q: "Better to light a candle than to curse the darkness.", a: "Chinese proverb"},
        {q: "El tiempo es oro. (Time is gold.)", a: "Spanish proverb"},
        {q: "Even the longest night will end and the sun will rise.", a: "Victor Hugo"},
        {q: "What we fear doing most is usually what we most need to do.", a: "Ralph Waldo Emerson"},
        {q: "Well begun is half done.", a: "Aristotle"},
        {q: "The journey of a thousand miles begins with one step.", a: "Lao Tzu"},
        {q: "Do not go where the path may lead, go instead where there is no path and leave a trail.", a: "Ralph Waldo Emerson"},
        {q: "To live is the rarest thing in the world. Most people exist, that is all.", a: "Oscar Wilde"},
        {q: "Idealistic as it may sound, altruism should be the driving force in business, not just competition and a desire for wealth.", a: "Dalai Lama"},
        {q: "Happiness is not something ready made. It comes from your own actions.", a: "Dalai Lama"},
        {q: "No matter how long the night, the day will surely come.", a: "African proverb"},
        {q: "If you want to go far, go together.", a: "African proverb"},
        {q: "One who asks does not lose their way.", a: "Akan proverb"},
        {q: "The sun does not forget a village just because it is small.", a: "African proverb"},
        {q: "A tree with strong roots laughs at storms.", a: "Malay proverb"},
        {q: "He who returns from a journey is not the same as he who left.", a: "Chinese proverb"},
        {q: "The bamboo that bends is stronger than the oak that resists.", a: "Japanese proverb"},
        {q: "When you stand with your back to the sun, you see only your shadow.", a: "Kahlil Gibran"},
        {q: "You cannot prevent the birds of sadness from flying over your head, but you can prevent them from building nests in your hair.", a: "Chinese proverb"},
        {q: "Where there is love, there is no darkness.", a: "Burundi proverb"},
        {q: "A brave man dies once, a coward a thousand times.", a: "Somali proverb"},
        {q: "The best bridge is a hand that is stretched out.", a: "Arabic proverb"},
        {q: "Your heart is the size of an ocean. Go find yourself in its hidden depths.", a: "Rumi"},
        {q: "A stumble may prevent a fall.", a: "Yoruba proverb"},
        {q: "The moon moves slowly, but it crosses the town.", a: "Ashanti proverb"},
        {q: "Hope is like a road in the country; there was never a road, but when many people walk on it, the road comes into existence.", a: "Lu Xun"},
        {q: "Yesterday is but today's memory, and tomorrow is today's dream.", a: "Kahlil Gibran"}
      ],

      backgrounds: [
        'https://images.unsplash.com/photo-1497436072909-60f360e1d4b1', // Norway mountains
        'https://images.unsplash.com/photo-1506744038136-46273834b3fb', // Yosemite
        'https://images.unsplash.com/photo-1433086966358-54859d0ed716', // Forest waterfall
        'https://images.unsplash.com/photo-1464822759023-fed622ff2c3b', // Misty mountains (Updated)
        'https://images.unsplash.com/photo-1501785888041-af3ef285b470', // Calm lake sunrise
        'https://images.unsplash.com/photo-1470071459604-3b5ec3a7fe05', // Foggy mountains
        'https://images.unsplash.com/photo-1441974231531-c6227db76b6e', // Sunlit forest
        'https://images.unsplash.com/photo-1518173946687-a4c8892bbd9f', // Cherry blossoms
        'https://images.unsplash.com/photo-1508804185872-d7badad00f7d', // Great Wall of China
        'https://images.unsplash.com/photo-1548115184-bc6544d06a58', // Petra, Jordan
        'https://images.unsplash.com/photo-1547471080-7cc2caa01a7e', // Serengeti, Tanzania
        'https://images.unsplash.com/photo-1528127269322-539801943592', // Ha Long Bay, Vietnam (Updated)
        'https://images.unsplash.com/photo-1510414842594-a61c69b5ae57', // Iguazu Falls, Argentina/Brazil
        'https://images.unsplash.com/photo-1526392060635-9d6019884377', // Machu Picchu, Peru
        'https://images.unsplash.com/photo-1490730141103-6cac27aaab94', // Mount Fuji, Japan
        'https://images.unsplash.com/photo-1518548419970-58e3b4079ab2', // Bali, Indonesia
        'https://images.unsplash.com/photo-1544376798-89aa6b82c6cd', // Angkor Wat, Cambodia
        'https://images.unsplash.com/photo-1503177119275-0aa32b3a9368', // Pyramids of Giza, Egypt
        'https://images.unsplash.com/photo-1493976040374-85c8e12f0c0e', // Kyoto, Japan
        'https://images.unsplash.com/photo-1506461883276-594a12b11cf3', // Cappadocia, Turkey
        'https://images.unsplash.com/photo-1483728642387-6c3bdd6c93e5', // Rio de Janeiro, Brazil
        'https://images.unsplash.com/photo-1512343879784-a960bf40e7f2', // Varanasi, India
        'https://images.unsplash.com/photo-1476108621677-3c620901b5e7', // Torres del Paine, Chile
        'https://images.unsplash.com/photo-1543097692-fa13c6cd8595', // Zhangjiajie, China
        'https://images.unsplash.com/photo-1512632578888-169bbbc64f33', // Abu Dhabi Mosque
        'https://images.pexels.com/photos/3225517/pexels-photo-3225517.jpeg', // Lush green forest valley
        'https://images.pexels.com/photos/3408744/pexels-photo-3408744.jpeg', // Snowy mountain peak
        'https://images.pexels.com/photos/15286/pexels-photo.jpg',           // Misty woodland path
        'https://images.pexels.com/photos/3244513/pexels-photo-3244513.jpeg', // Aurora Borealis over water
        'https://images.pexels.com/photos/1624496/pexels-photo-1624496.jpeg'  // Serene mountain lake reflection
      ]
    };

    // ---------- utilities ----------
    const utils = {
      pad: n => n < 10 ? "0"+n : n,

      // Cookie utilities
      setCookie: (name, value, days = 365) => {
        const d = new Date();
        d.setTime(d.getTime() + (days * 24 * 60 * 60 * 1000));
        const expires = "expires=" + d.toUTCString();
        document.cookie = name + "=" + value + ";" + expires + ";path=/";
      },

      getCookie: (name) => {
        const value = `; ${document.cookie}`;
        const parts = value.split(`; ${name}=`);
        if (parts.length === 2) return parts.pop().split(';').shift();
        return null;
      },

      // Get URL parameters
      getUrlParam: (param) => {
        const urlParams = new URLSearchParams(window.location.search);
        return urlParams.get(param);
      },

      updateFavicon: () => {
        const canvas = document.createElement('canvas');
        canvas.width = 32;
        canvas.height = 32;
        const ctx = canvas.getContext('2d');
        const now = new Date();

        // Clear canvas
        ctx.clearRect(0, 0, 32, 32);

        // Draw clock face
        ctx.beginPath();
        ctx.arc(16, 16, 14, 0, 2 * Math.PI);
        ctx.strokeStyle = '#FFFFFF';
        ctx.lineWidth = 2;
        ctx.stroke();

        // Calculate hand angles
        const hours = now.getHours() % 12;
        const minutes = now.getMinutes();
        const seconds = now.getSeconds();

        const hoursAngle = (hours + minutes / 60) * (Math.PI * 2 / 12) - Math.PI / 2;
        const minutesAngle = minutes * (Math.PI * 2 / 60) - Math.PI / 2;
        const secondsAngle = seconds * (Math.PI * 2 / 60) - Math.PI / 2;

        // Draw hour hand
        ctx.beginPath();
        ctx.moveTo(16, 16);
        ctx.lineTo(
          16 + Math.cos(hoursAngle) * 8,
          16 + Math.sin(hoursAngle) * 8
        );
        ctx.strokeStyle = '#FFFFFF';
        ctx.lineWidth = 2;
        ctx.stroke();

        // Draw minute hand
        ctx.beginPath();
        ctx.moveTo(16, 16);
        ctx.lineTo(
          16 + Math.cos(minutesAngle) * 10,
          16 + Math.sin(minutesAngle) * 10
        );
        ctx.strokeStyle = '#FFFFFF';
        ctx.lineWidth = 2;
        ctx.stroke();

        // Draw second hand
        ctx.beginPath();
        ctx.moveTo(16, 16);
        ctx.lineTo(
          16 + Math.cos(secondsAngle) * 12,
          16 + Math.sin(secondsAngle) * 12
        );
        ctx.strokeStyle = '#FF0000';
        ctx.lineWidth = 1;
        ctx.stroke();

        // Draw center dot
        ctx.beginPath();
        ctx.arc(16, 16, 2, 0, 2 * Math.PI);
        ctx.fillStyle = '#FFFFFF';
        ctx.fill();

        // Update favicon
        document.getElementById('favicon').href = canvas.toDataURL();
      },

      getDateSeed: () => {
        const d = new Date();
        return `${d.getFullYear()}${utils.pad(d.getMonth()+1)}${utils.pad(d.getDate())}`;
      },

      seedToNumber: (seed) => {
        return [...seed].reduce((sum, char) => sum + char.charCodeAt(0), 0);
      },

      pickFromArray: (arr, seed) => {
        return arr[utils.seedToNumber(seed) % arr.length];
      }
    };

    // ---------- core functionality ----------
    const app = {
      timeEl: document.getElementById('time'),
      mantraEl: document.getElementById('mantra'),
      quoteEl: document.getElementById('quote'),
      attribEl: document.getElementById('attrib'),
      failEl: document.getElementById('failCount'),
      dateSeed: utils.getDateSeed(),

      init: function() {
        this.initClock();

        // Use saved seed if it exists and is for today, otherwise default to date seed
        const savedSeed = localStorage.getItem('backgroundSeed');
        const savedSeedDate = localStorage.getItem('backgroundSeedDate');
        const today = utils.getDateSeed();

        if (savedSeed && savedSeedDate === today) {
          this.setDailyContent(savedSeed);
        } else {
          this.setDailyContent();
        }

        this.initControls();
      },

      setClockType: function(type) {
        const timeContainer = document.querySelector('.time-container');
        const isAnalog = type === 'analog';

        // Update UI
        if (isAnalog) {
          timeContainer.classList.add('analog');
        } else {
          timeContainer.classList.remove('analog');
        }

        // Update storage
        localStorage.setItem('clockType', type);
        utils.setCookie('clockType', type);
      },

      initClock: function() {
        const timeContainer = document.querySelector('.time-container');
        const hoursHand = document.querySelector('.hours-hand');
        const minutesHand = document.querySelector('.minutes-hand');
        const secondsHand = document.querySelector('.seconds-hand');

        const updateTime = () => {
          const now = new Date();
          const hours = now.getHours();
          const minutes = now.getMinutes();
          const seconds = now.getSeconds();

          // Update digital display
          this.timeEl.textContent = [hours, minutes, seconds]
            .map(utils.pad)
            .join(':');

          // Update analog hands
          const hoursAngle = (hours % 12 + minutes / 60) * 30; // 360/12 = 30 degrees per hour
          const minutesAngle = minutes * 6; // 360/60 = 6 degrees per minute
          const secondsAngle = seconds * 6; // 360/60 = 6 degrees per second

          hoursHand.style.transform = `translateX(-50%) rotate(${hoursAngle}deg)`;
          minutesHand.style.transform = `translateX(-50%) rotate(${minutesAngle}deg)`;
          secondsHand.style.transform = `translateX(-50%) rotate(${secondsAngle}deg)`;
        };

        // Add clock toggle handler
        document.getElementById('clockBtn').addEventListener('click', () => {
          const newType = timeContainer.classList.contains('analog') ? 'digital' : 'analog';
          this.setClockType(newType);
        });

        // Check URL parameter first, then cookie, then localStorage, default to analog
        const urlType = utils.getUrlParam('clockType');
        if (urlType === 'analog' || urlType === 'digital') {
          this.setClockType(urlType);
        } else {
          const cookieType = utils.getCookie('clockType');
          const storageType = localStorage.getItem('clockType');
          const savedType = cookieType || storageType || 'analog';
          this.setClockType(savedType);
        }

        const updateAll = () => {
          updateTime();
          utils.updateFavicon();
        };
        updateAll();
        setInterval(updateAll, 1000);
      },

      setDailyContent: async function(forceSeed) {
        const seed = forceSeed || this.dateSeed;

        // Set mantra and quote
        const mantra = utils.pickFromArray(dailyContent.mantras, seed);
        const quote = utils.pickFromArray(dailyContent.quotes, seed);

        this.mantraEl.textContent = mantra;
        this.quoteEl.textContent = `"${quote.q}"`;
        this.attribEl.textContent = `— ${quote.a}`;

        // Set background with 404 check and looping
        const w = window.innerWidth;
        const h = Math.max(window.innerHeight, 720);
        const startIndex = utils.seedToNumber(seed) % dailyContent.backgrounds.length;

        let workingUrl = null;
        let failCount = 0;

        // Helper to check if an image is valid
        const checkImage = (url) => {
          return new Promise(resolve => {
            const img = new Image();
            img.onload = () => resolve(true);
            img.onerror = () => {
              console.warn("Background failed to load:", url);
              resolve(false);
            };
            img.src = url;
          });
        };

        for (let i = 0; i < dailyContent.backgrounds.length; i++) {
          const currentIndex = (startIndex + i) % dailyContent.backgrounds.length;
          const baseUrl = dailyContent.backgrounds[currentIndex];

          // Only apply Unsplash-specific formatting if it's an Unsplash URL
          let testUrl = baseUrl;
          if (baseUrl.includes('images.unsplash.com')) {
            const separator = baseUrl.includes('?') ? '&' : '?';
            testUrl = `${baseUrl}${separator}auto=format&fit=crop&w=${Math.round(w)}&h=${Math.round(h)}`;
          }

          if (await checkImage(testUrl)) {
            workingUrl = testUrl;
            break;
          } else {
            failCount++;
          }
        }

        // Update failure UI
        if (this.failEl) {
          if (failCount > 0) {
            this.failEl.textContent = `${failCount} failed`;
            this.failEl.style.display = 'inline-block';
          } else {
            this.failEl.style.display = 'none';
          }
        }

        if (workingUrl) {
          document.body.style.backgroundImage = `url('${workingUrl}')`;
        } else {
          document.body.style.background = "linear-gradient(180deg,#2c3e50,#4b6cb7)";
        }

        // Update page title
        document.title = `Time: ${this.timeEl.textContent} — ${mantra}`;
      },

      initControls: function() {
        // Refresh background
        const refreshBtn = document.getElementById('refreshBtn');
        if (refreshBtn) {
          refreshBtn.addEventListener('click', () => {
            const newSeed = Date.now().toString();
            const today = utils.getDateSeed();
            localStorage.setItem('backgroundSeed', newSeed);
            localStorage.setItem('backgroundSeedDate', today);
            this.setDailyContent(newSeed);
          });
        }

        // Edit content
        const editBtn = document.getElementById('editBtn');
        if (editBtn) {
          editBtn.addEventListener('click', () => {
            const curMantra = this.mantraEl.textContent;
            const curQuote = this.quoteEl.textContent.replace(/^"|"$/g,'');
            const curAttrib = this.attribEl.textContent.replace(/^—\s*/,'');

            const newMantra = prompt("Edit mantra (short, single line):", curMantra);
            if(newMantra) this.mantraEl.textContent = newMantra.slice(0,200);

            const newQuote = prompt("Edit quote (text):", curQuote);
            if(newQuote) this.quoteEl.textContent = `"${newQuote.slice(0,240)}"`;

            const newAttrib = prompt("Quote author / attribution:", curAttrib);
            if(newAttrib) this.attribEl.textContent = `— ${newAttrib.slice(0,80)}`;
          });
        }

        // Update title periodically
        setInterval(() => {
          document.title = `Time: ${this.timeEl.textContent} — ${this.mantraEl.textContent}`;
        }, 60*1000);
      }
    }

    // Initialize app
    app.init();
  })();
</script>


<!--
<h3>UTC</h3>
<p><time id="time"></time></p>
<h3>Los Angeles</h3>
<p><time id="time-los-angeles"></time></p>
<h3>Denver</h3>
<p><time id="time-denver"></time></p>
<h3>Chicago</h3>
<p><time id="time-chicago"></time></p>
<h3>Montreal</h3>
<p><time id="time-montreal"></time></p>

<div class="js-timezones" style="display: none; word-break: break-all;"></div>

<script>

  function getTime(timezone) {
    let options = {
      timeZone: timezone,
      timeZoneName: 'short',
      weekday: 'long',
      year: 'numeric',
      month: 'numeric',
      day: 'numeric',
      hour: 'numeric',
      minute: 'numeric',
      second: 'numeric',
      hour12: false
    },
    // formatter = new Intl.DateTimeFormat([], options);
    formatter = new Intl.DateTimeFormat('en-CA', options);
    return formatter.format(new Date())
  }
  document.querySelector('.js-timezones').innerHTML = Intl.supportedValuesOf('timeZone');

  document.querySelector('#time').innerHTML = getTime('UTC')
  document.querySelector('#time-los-angeles').innerHTML = getTime('America/Los_Angeles')
  document.querySelector('#time-denver').innerHTML = getTime('America/Denver')
  document.querySelector('#time-chicago').innerHTML = getTime('America/Chicago')
  document.querySelector('#time-montreal').innerHTML = getTime('America/Toronto')
</script>
 -->


    </main>

    <script>
      window.va = window.va || function () { (window.vaq = window.vaq || []).push(arguments); };
    </script>
    <script defer src="/_vercel/insights/script.js"></script>

    

  </body>
</html>
